name: "tss2-fapi-rs-build"

services:
  build:
    build:
      context: ./
      dockerfile: build.Dockerfile
      args:
        BASE_VERSION: ${BASE_VERSION_BUILD:-r9@sha256:6712a942c33500387ff4ae98e47fc646bec88c242b8e85d5374911bfba27e789}
    volumes:
      - ../../../:/var/opt/rust/src:ro
      - out:/var/tmp/rust:rw
      - reg:/usr/local/cargo/registry:rw
    command:
      ${CARGO_CMD:-rebuild --release}

volumes:
  out:
  reg:
